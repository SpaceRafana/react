{"ast":null,"code":"import _toConsumableArray from \"E:/Mon Site/portfolio-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectWithoutProperties from \"E:/Mon Site/portfolio-react/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"noise\", \"count\", \"speed\", \"opacity\", \"scale\", \"size\", \"color\", \"children\"];\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { extend, useThree, useFrame } from '@react-three/fiber';\nimport { shaderMaterial } from './shaderMaterial.js';\nimport { version } from '../helpers/constants.js';\nvar SparklesImplMaterial = /* @__PURE__ */shaderMaterial({\n  time: 0,\n  pixelRatio: 1\n}, \" uniform float pixelRatio;\\n    uniform float time;\\n    attribute float size;  \\n    attribute float speed;  \\n    attribute float opacity;\\n    attribute vec3 noise;\\n    attribute vec3 color;\\n    varying vec3 vColor;\\n    varying float vOpacity;\\n    void main() {\\n      vec4 modelPosition = modelMatrix * vec4(position, 1.0);\\n      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;\\n      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;\\n      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;\\n      vec4 viewPosition = viewMatrix * modelPosition;\\n      vec4 projectionPostion = projectionMatrix * viewPosition;\\n      gl_Position = projectionPostion;\\n      gl_PointSize = size * 25. * pixelRatio;\\n      gl_PointSize *= (1.0 / - viewPosition.z);\\n      vColor = color;\\n      vOpacity = opacity;\\n    }\", \" varying vec3 vColor;\\n    varying float vOpacity;\\n    void main() {\\n      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));\\n      float strength = 0.05 / distanceToCenter - 0.1;\\n      gl_FragColor = vec4(vColor, strength * vOpacity);\\n      #include <tonemapping_fragment>\\n      #include <\".concat(version >= 154 ? 'colorspace_fragment' : 'encodings_fragment', \">\\n    }\"));\nvar isFloat32Array = function isFloat32Array(def) {\n  return def && def.constructor === Float32Array;\n};\nvar expandColor = function expandColor(v) {\n  return [v.r, v.g, v.b];\n};\nvar isVector = function isVector(v) {\n  return v instanceof THREE.Vector2 || v instanceof THREE.Vector3 || v instanceof THREE.Vector4;\n};\nvar normalizeVector = function normalizeVector(v) {\n  if (Array.isArray(v)) return v;else if (isVector(v)) return v.toArray();\n  return [v, v, v];\n};\nfunction usePropAsIsOrAsAttribute(count, prop, setDefault) {\n  return React.useMemo(function () {\n    if (prop !== undefined) {\n      if (isFloat32Array(prop)) {\n        return prop;\n      } else {\n        if (prop instanceof THREE.Color) {\n          var a = Array.from({\n            length: count * 3\n          }, function () {\n            return expandColor(prop);\n          }).flat();\n          return Float32Array.from(a);\n        } else if (isVector(prop) || Array.isArray(prop)) {\n          var _a = Array.from({\n            length: count * 3\n          }, function () {\n            return normalizeVector(prop);\n          }).flat();\n          return Float32Array.from(_a);\n        }\n        return Float32Array.from({\n          length: count\n        }, function () {\n          return prop;\n        });\n      }\n    }\n    return Float32Array.from({\n      length: count\n    }, setDefault);\n  }, [prop]);\n}\nvar Sparkles = /* @__PURE__ */React.forwardRef(function (_ref, forwardRef) {\n  var _ref$noise = _ref.noise,\n    noise = _ref$noise === void 0 ? 1 : _ref$noise,\n    _ref$count = _ref.count,\n    count = _ref$count === void 0 ? 100 : _ref$count,\n    _ref$speed = _ref.speed,\n    speed = _ref$speed === void 0 ? 1 : _ref$speed,\n    _ref$opacity = _ref.opacity,\n    opacity = _ref$opacity === void 0 ? 1 : _ref$opacity,\n    _ref$scale = _ref.scale,\n    scale = _ref$scale === void 0 ? 1 : _ref$scale,\n    size = _ref.size,\n    color = _ref.color,\n    children = _ref.children,\n    props = _objectWithoutProperties(_ref, _excluded);\n  React.useMemo(function () {\n    return extend({\n      SparklesImplMaterial: SparklesImplMaterial\n    });\n  }, []);\n  var ref = React.useRef(null);\n  var dpr = useThree(function (state) {\n    return state.viewport.dpr;\n  });\n  var _scale = normalizeVector(scale);\n  var positions = React.useMemo(function () {\n    return Float32Array.from(Array.from({\n      length: count\n    }, function () {\n      return _scale.map(THREE.MathUtils.randFloatSpread);\n    }).flat());\n  }, [count].concat(_toConsumableArray(_scale)));\n  var sizes = usePropAsIsOrAsAttribute(count, size, Math.random);\n  var opacities = usePropAsIsOrAsAttribute(count, opacity);\n  var speeds = usePropAsIsOrAsAttribute(count, speed);\n  var noises = usePropAsIsOrAsAttribute(count * 3, noise);\n  var colors = usePropAsIsOrAsAttribute(color === undefined ? count * 3 : count, !isFloat32Array(color) ? new THREE.Color(color) : color, function () {\n    return 1;\n  });\n  useFrame(function (state) {\n    if (ref.current && ref.current.material) ref.current.material.time = state.clock.elapsedTime;\n  });\n  React.useImperativeHandle(forwardRef, function () {\n    return ref.current;\n  }, []);\n  return /*#__PURE__*/React.createElement(\"points\", _extends({\n    key: \"particle-\".concat(count, \"-\").concat(JSON.stringify(scale))\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"bufferGeometry\", null, /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attach: \"attributes-position\",\n    args: [positions, 3]\n  }), /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attach: \"attributes-size\",\n    args: [sizes, 1]\n  }), /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attach: \"attributes-opacity\",\n    args: [opacities, 1]\n  }), /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attach: \"attributes-speed\",\n    args: [speeds, 1]\n  }), /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attach: \"attributes-color\",\n    args: [colors, 3]\n  }), /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attach: \"attributes-noise\",\n    args: [noises, 3]\n  })), children ? children : /*#__PURE__*/React.createElement(\"sparklesImplMaterial\", {\n    transparent: true,\n    pixelRatio: dpr,\n    depthWrite: false\n  }));\n});\nexport { Sparkles };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}