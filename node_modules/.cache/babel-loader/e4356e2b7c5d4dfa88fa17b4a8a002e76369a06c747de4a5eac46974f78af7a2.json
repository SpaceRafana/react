{"ast":null,"code":"import _classCallCheck from \"E:/Mon Site/portfolio-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"E:/Mon Site/portfolio-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"E:/Mon Site/portfolio-react/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"E:/Mon Site/portfolio-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"E:/Mon Site/portfolio-react/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"E:/Mon Site/portfolio-react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Vector3, Quaternion, Object3D, Matrix4 } from \"three\";\nvar _position = new Vector3();\nvar _quaternion = new Quaternion();\nvar _scale = new Vector3();\nvar CSS3DObject = /*#__PURE__*/function (_Object3D) {\n  _inherits(CSS3DObject, _Object3D);\n  var _super = _createSuper(CSS3DObject);\n  function CSS3DObject() {\n    var _this2;\n    var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document.createElement(\"div\");\n    _classCallCheck(this, CSS3DObject);\n    _this2 = _super.call(this);\n    _this2.isCSS3DObject = true;\n    _this2.element = element;\n    _this2.element.style.position = \"absolute\";\n    _this2.element.style.pointerEvents = \"auto\";\n    _this2.element.style.userSelect = \"none\";\n    _this2.element.setAttribute(\"draggable\", false);\n    _this2.addEventListener(\"removed\", function () {\n      this.traverse(function (object) {\n        if (object.element instanceof Element && object.element.parentNode !== null) {\n          object.element.parentNode.removeChild(object.element);\n        }\n      });\n    });\n    return _this2;\n  }\n  _createClass(CSS3DObject, [{\n    key: \"copy\",\n    value: function copy(source, recursive) {\n      _get(_getPrototypeOf(CSS3DObject.prototype), \"copy\", this).call(this, source, recursive);\n      this.element = source.element.cloneNode(true);\n      return this;\n    }\n  }]);\n  return CSS3DObject;\n}(Object3D);\nvar CSS3DSprite = /*#__PURE__*/function (_CSS3DObject) {\n  _inherits(CSS3DSprite, _CSS3DObject);\n  var _super2 = _createSuper(CSS3DSprite);\n  function CSS3DSprite(element) {\n    var _this3;\n    _classCallCheck(this, CSS3DSprite);\n    _this3 = _super2.call(this, element);\n    _this3.isCSS3DSprite = true;\n    _this3.rotation2D = 0;\n    return _this3;\n  }\n  _createClass(CSS3DSprite, [{\n    key: \"copy\",\n    value: function copy(source, recursive) {\n      _get(_getPrototypeOf(CSS3DSprite.prototype), \"copy\", this).call(this, source, recursive);\n      this.rotation2D = source.rotation2D;\n      return this;\n    }\n  }]);\n  return CSS3DSprite;\n}(CSS3DObject);\nvar _matrix = new Matrix4();\nvar _matrix2 = new Matrix4();\nvar CSS3DRenderer = /*#__PURE__*/_createClass(function CSS3DRenderer() {\n  var parameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  _classCallCheck(this, CSS3DRenderer);\n  var _this = this;\n  var _width, _height;\n  var _widthHalf, _heightHalf;\n  var cache = {\n    camera: {\n      fov: 0,\n      style: \"\"\n    },\n    objects: /* @__PURE__ */new WeakMap()\n  };\n  var domElement = parameters.element !== void 0 ? parameters.element : document.createElement(\"div\");\n  domElement.style.overflow = \"hidden\";\n  this.domElement = domElement;\n  var viewElement = document.createElement(\"div\");\n  viewElement.style.transformOrigin = \"0 0\";\n  viewElement.style.pointerEvents = \"none\";\n  domElement.appendChild(viewElement);\n  var cameraElement = document.createElement(\"div\");\n  cameraElement.style.transformStyle = \"preserve-3d\";\n  viewElement.appendChild(cameraElement);\n  this.getSize = function () {\n    return {\n      width: _width,\n      height: _height\n    };\n  };\n  this.render = function (scene, camera) {\n    var fov = camera.projectionMatrix.elements[5] * _heightHalf;\n    if (cache.camera.fov !== fov) {\n      viewElement.style.perspective = camera.isPerspectiveCamera ? fov + \"px\" : \"\";\n      cache.camera.fov = fov;\n    }\n    if (camera.view && camera.view.enabled) {\n      viewElement.style.transform = \"translate( \".concat(-camera.view.offsetX * (_width / camera.view.width), \"px, \").concat(-camera.view.offsetY * (_height / camera.view.height), \"px )\");\n      viewElement.style.transform += \"scale( \".concat(camera.view.fullWidth / camera.view.width, \", \").concat(camera.view.fullHeight / camera.view.height, \" )\");\n    } else {\n      viewElement.style.transform = \"\";\n    }\n    if (scene.matrixWorldAutoUpdate === true) scene.updateMatrixWorld();\n    if (camera.parent === null && camera.matrixWorldAutoUpdate === true) camera.updateMatrixWorld();\n    var tx, ty;\n    if (camera.isOrthographicCamera) {\n      tx = -(camera.right + camera.left) / 2;\n      ty = (camera.top + camera.bottom) / 2;\n    }\n    var scaleByViewOffset = camera.view && camera.view.enabled ? camera.view.height / camera.view.fullHeight : 1;\n    var cameraCSSMatrix = camera.isOrthographicCamera ? \"scale( \".concat(scaleByViewOffset, \" )scale(\") + fov + \")translate(\" + epsilon(tx) + \"px,\" + epsilon(ty) + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse) : \"scale( \".concat(scaleByViewOffset, \" )translateZ(\") + fov + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse);\n    var style = cameraCSSMatrix + \"translate(\" + _widthHalf + \"px,\" + _heightHalf + \"px)\";\n    if (cache.camera.style !== style) {\n      cameraElement.style.transform = style;\n      cache.camera.style = style;\n    }\n    renderObject(scene, scene, camera);\n  };\n  this.setSize = function (width, height) {\n    _width = width;\n    _height = height;\n    _widthHalf = _width / 2;\n    _heightHalf = _height / 2;\n    domElement.style.width = width + \"px\";\n    domElement.style.height = height + \"px\";\n    viewElement.style.width = width + \"px\";\n    viewElement.style.height = height + \"px\";\n    cameraElement.style.width = width + \"px\";\n    cameraElement.style.height = height + \"px\";\n  };\n  function epsilon(value) {\n    return Math.abs(value) < 1e-10 ? 0 : value;\n  }\n  function getCameraCSSMatrix(matrix) {\n    var elements = matrix.elements;\n    return \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(-elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(elements[6]) + \",\" + epsilon(elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(-elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(-elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\n  }\n  function getObjectCSSMatrix(matrix) {\n    var elements = matrix.elements;\n    var matrix3d = \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(-elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(-elements[6]) + \",\" + epsilon(-elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\n    return \"translate(-50%,-50%)\" + matrix3d;\n  }\n  function renderObject(object, scene, camera, cameraCSSMatrix) {\n    if (object.isCSS3DObject) {\n      var visible = object.visible === true && object.layers.test(camera.layers) === true;\n      object.element.style.display = visible === true ? \"\" : \"none\";\n      if (visible === true) {\n        object.onBeforeRender(_this, scene, camera);\n        var style;\n        if (object.isCSS3DSprite) {\n          _matrix.copy(camera.matrixWorldInverse);\n          _matrix.transpose();\n          if (object.rotation2D !== 0) _matrix.multiply(_matrix2.makeRotationZ(object.rotation2D));\n          object.matrixWorld.decompose(_position, _quaternion, _scale);\n          _matrix.setPosition(_position);\n          _matrix.scale(_scale);\n          _matrix.elements[3] = 0;\n          _matrix.elements[7] = 0;\n          _matrix.elements[11] = 0;\n          _matrix.elements[15] = 1;\n          style = getObjectCSSMatrix(_matrix);\n        } else {\n          style = getObjectCSSMatrix(object.matrixWorld);\n        }\n        var element = object.element;\n        var cachedObject = cache.objects.get(object);\n        if (cachedObject === void 0 || cachedObject.style !== style) {\n          element.style.transform = style;\n          var objectData = {\n            style: style\n          };\n          cache.objects.set(object, objectData);\n        }\n        if (element.parentNode !== cameraElement) {\n          cameraElement.appendChild(element);\n        }\n        object.onAfterRender(_this, scene, camera);\n      }\n    }\n    for (var i = 0, l = object.children.length; i < l; i++) {\n      renderObject(object.children[i], scene, camera);\n    }\n  }\n});\nexport { CSS3DObject, CSS3DRenderer, CSS3DSprite };\n//# sourceMappingURL=CSS3DRenderer.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}