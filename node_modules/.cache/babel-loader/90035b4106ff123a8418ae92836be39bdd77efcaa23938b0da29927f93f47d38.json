{"ast":null,"code":"import _objectWithoutProperties from \"E:/Mon Site/portfolio-react/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"camera\", \"domElement\", \"makeDefault\", \"onStart\", \"onEnd\", \"onChange\", \"regress\"];\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { Box3, MathUtils, Matrix4, Quaternion, Raycaster, Sphere, Spherical, Vector2, Vector3, Vector4 } from 'three';\nimport * as React from 'react';\nimport { forwardRef, useMemo, useEffect } from 'react';\nimport { extend, useThree, useFrame } from '@react-three/fiber';\nimport CameraControlsImpl from 'camera-controls';\nvar CameraControls = /* @__PURE__ */forwardRef(function (props, ref) {\n  // useMemo is used here instead of useEffect, otherwise the useMemo below runs first and throws\n  useMemo(function () {\n    // to allow for tree shaking, we only import the subset of THREE that is used by camera-controls\n    // see https://github.com/yomotsu/camera-controls#important\n    var subsetOfTHREE = {\n      Box3: Box3,\n      MathUtils: {\n        clamp: MathUtils.clamp\n      },\n      Matrix4: Matrix4,\n      Quaternion: Quaternion,\n      Raycaster: Raycaster,\n      Sphere: Sphere,\n      Spherical: Spherical,\n      Vector2: Vector2,\n      Vector3: Vector3,\n      Vector4: Vector4\n    };\n    CameraControlsImpl.install({\n      THREE: subsetOfTHREE\n    });\n    extend({\n      CameraControlsImpl: CameraControlsImpl\n    });\n  }, []);\n  var camera = props.camera,\n    domElement = props.domElement,\n    makeDefault = props.makeDefault,\n    onStart = props.onStart,\n    onEnd = props.onEnd,\n    onChange = props.onChange,\n    regress = props.regress,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var defaultCamera = useThree(function (state) {\n    return state.camera;\n  });\n  var gl = useThree(function (state) {\n    return state.gl;\n  });\n  var invalidate = useThree(function (state) {\n    return state.invalidate;\n  });\n  var events = useThree(function (state) {\n    return state.events;\n  });\n  var setEvents = useThree(function (state) {\n    return state.setEvents;\n  });\n  var set = useThree(function (state) {\n    return state.set;\n  });\n  var get = useThree(function (state) {\n    return state.get;\n  });\n  var performance = useThree(function (state) {\n    return state.performance;\n  });\n  var explCamera = camera || defaultCamera;\n  var explDomElement = domElement || events.connected || gl.domElement;\n  var controls = useMemo(function () {\n    return new CameraControlsImpl(explCamera);\n  }, [explCamera]);\n  useFrame(function (state, delta) {\n    if (controls.enabled) controls.update(delta);\n  }, -1);\n  useEffect(function () {\n    controls.connect(explDomElement);\n    return function () {\n      return void controls.disconnect();\n    };\n  }, [explDomElement, controls]);\n  useEffect(function () {\n    var callback = function callback(e) {\n      invalidate();\n      if (regress) performance.regress();\n      if (onChange) onChange(e);\n    };\n    var onStartCb = function onStartCb(e) {\n      if (onStart) onStart(e);\n    };\n    var onEndCb = function onEndCb(e) {\n      if (onEnd) onEnd(e);\n    };\n    controls.addEventListener('update', callback);\n    controls.addEventListener('controlstart', onStartCb);\n    controls.addEventListener('controlend', onEndCb);\n    controls.addEventListener('control', callback);\n    controls.addEventListener('transitionstart', callback);\n    controls.addEventListener('wake', callback);\n    return function () {\n      controls.removeEventListener('update', callback);\n      controls.removeEventListener('controlstart', onStartCb);\n      controls.removeEventListener('controlend', onEndCb);\n      controls.removeEventListener('control', callback);\n      controls.removeEventListener('transitionstart', callback);\n      controls.removeEventListener('wake', callback);\n    };\n  }, [controls, onStart, onEnd, invalidate, setEvents, regress, onChange]);\n  useEffect(function () {\n    if (makeDefault) {\n      var old = get().controls;\n      set({\n        controls: controls\n      });\n      return function () {\n        return set({\n          controls: old\n        });\n      };\n    }\n  }, [makeDefault, controls]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    ref: ref,\n    object: controls\n  }, restProps));\n});\nexport { CameraControls };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}